 <!doctype html>
<html>
<head>
    <title>demo rest sinatra + emberjs + coffeescript</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="stylesheet" type="test/css" href="http://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.1.0/css/bootstrap.min.css" />
    <link rel="stylesheet" type="test/css" href="http://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.1.0/css/bootstrap-theme.min.css" />
    <link rel="stylesheet" type="test/css" href="/app.css" />

    <script src="http://cdnjs.cloudflare.com/ajax/libs/jquery/1.10.0/jquery.min.js"></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/coffee-script/1.7.1/coffee-script.min.js"></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/handlebars.js/1.3.0/handlebars.min.js"></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/ember.js/1.3.1/ember.min.js"></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/ember-data.js/1.0.0-beta.6/ember-data.min.js"></script>
    <script type="text/coffeescript" src="/app.coffee"></script>
</head>
<body>
<noscript>Debe usar un navegador con soporte para javascript</noscript>

<script type="text/x-handlebars">
    {{ outlet }}
</script>

<script type="text/x-handlebars" id="posts">
    <ul class="posts">
    {{#each post in controller}}
        <li>{{#link-to 'post' post}}{{post.titulo}}{{/link-to}}</li>
    {{else}}
        No hay posts
    {{/each}}
    </ul>
    <button class='btn btn-primary' {{action crear}}>Crear post</button>
    <div class="post">
        {{ outlet }}
    </div>
</script>

<script type="text/x-handlebars" id="post">
    {{#if editando}}
        <form role='form' {{action guardar on='submit'}}>
            {{input type='text' value=titulo class='form-control' }}
            {{input type='text' value=autor class='form-control' }}
            {{textarea value=texto rows=5 class='form-control'}}
            {{input type='submit' value='Guardar' class='btn btn-primary' disabled=modificado}}
            <button class='btn btn-info' {{action cancelar}}>Cancelar</button>
        </form>
    {{else}}
        <h1>{{ titulo }}</h1>
        <h4>{{ autor }}</h4>
        <p>{{ texto }}</p>
        <button class='btn btn-default' {{action editar}}>Editar</button>
        <button class='btn btn-danger' {{action eliminar}}>Eliminar</button>
    {{/if}}
</script>
</body>
</html>
